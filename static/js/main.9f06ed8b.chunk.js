(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{132:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},149:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n.n(c),o=n(30),i=n.n(o),s=n(118),u=n(289),d=(n(132),n(61)),m=n(49),l=n(22),j=n(16);!function(e){e.LOAD_COMMENTS="Unable to load data. Try again later!",e.ADD_COMMENT="Unable to add new comment. Try again later!",e.DELETE_COMMENT="Unable to delete comment. Try again later!",e.NONE=""}(r||(r={}));var b=n(38),f=n.n(b),O=n(54),p=n(285),h="https://dummyjson.com";function x(e){return new Promise((function(t){setTimeout(t,e)}))}var y=function(){var e=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(500);case 2:return t="".concat(h,"/comments"),e.abrupt("return",p.a.get(t).then((function(e){return e.data})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(500);case 2:return n="".concat(h,"/comments/").concat(t),e.abrupt("return",fetch(n).then((function(e){return e.json()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(O.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(500);case 2:return n="".concat(h,"/comments/add"),r={body:t,postId:3,userId:5},e.abrupt("return",p.a.post(n,r).then((function(e){return e.data})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C={comments:[],loading:!1,error:r.NONE},E=Object(m.b)("comments/fetch",(function(){return y()})),N=Object(m.b)("comments/fetchDelete",(function(e){return g(e)})),w=Object(m.b)("comments/fetchAdd",(function(e){return v(e)})),D=Object(m.c)({name:"comments",initialState:C,reducers:{set:function(e,t){return Object(j.a)(Object(j.a)({},e),{},{comments:t.payload})},setError:function(e,t){return Object(j.a)(Object(j.a)({},e),{},{error:t.payload})}},extraReducers:function(e){e.addCase(E.pending,(function(e){return Object(j.a)(Object(j.a)({},e),{},{loading:!0})})),e.addCase(E.fulfilled,(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{comments:t.payload.comments,loading:!1})})),e.addCase(E.rejected,(function(e){return Object(j.a)(Object(j.a)({},e),{},{error:r.LOAD_COMMENTS,loading:!1})})),e.addCase(N.pending,(function(e){return Object(j.a)(Object(j.a)({},e),{},{loading:!0})})),e.addCase(N.fulfilled,(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{loading:!1,comments:e.comments.filter((function(e){return t.payload.id?e.id!==t.payload.id:e.id!==+t.payload.message.match(/\d+/)[0]}))})})),e.addCase(N.rejected,(function(e){return Object(j.a)(Object(j.a)({},e),{},{error:r.DELETE_COMMENT,loading:!1})})),e.addCase(w.pending,(function(e){return Object(j.a)(Object(j.a)({},e),{},{loading:!0})})),e.addCase(w.fulfilled,(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{loading:!1,comments:[].concat(Object(l.a)(e.comments),[t.payload])})})),e.addCase(w.rejected,(function(e){return Object(j.a)(Object(j.a)({},e),{},{error:r.ADD_COMMENT,loading:!1})}))}}),M=D.reducer,T=D.actions,_=Object(m.a)({reducer:{comments:M}}),A=(n(144),n(291)),S=n(288),k=n(287),F=d.b,I=d.c,L=n(294),U=(n(145),n(1)),q=function(){return Object(U.jsx)("div",{className:"loader",children:Object(U.jsx)(L.a,{sx:{margin:"auto"}})})},B=n(295),J=n(281),z=(n(149),function(e){var t=e.comment,n=t.id,r=t.user,c=t.body,a=F();return Object(U.jsxs)("div",{className:"comment",children:[Object(U.jsxs)("div",{className:"comment__header",children:[Object(U.jsx)(A.a,{className:"comment__username",color:"text.secondary",children:r.username}),Object(U.jsx)("div",{className:"comment__button",children:Object(U.jsx)(B.a,{onClick:function(){return a(N(n))},children:Object(U.jsx)(J.a,{titleAccess:"delete"})})})]}),Object(U.jsx)(A.a,{variant:"body2",children:c})]})}),H=(n(152),function(){var e=I((function(e){return e.comments})).comments;return Object(U.jsx)("div",{className:"comments-list",children:e.map((function(e){return Object(U.jsx)(z,{comment:e},e.body)}))})}),P=n(13),R=n(284),W=n(293),G=n(114),K=n.n(G),Q=(n(153),function(){var e=F(),t=Object(c.useState)(""),n=Object(P.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),i=Object(P.a)(o,2),s=i[0],u=i[1],d=function(){return r?r&&r.length<10?"Comment body must be at least 10 characters long":r&&!K.a.isAscii(r)?"Comment body can only contain ASCII characters":" ":"Body is required"},m=" "===d(),l=function(){var t=Object(O.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e(w(r));case 3:t.sent.payload&&a("");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e=localStorage.getItem("comment");e&&a(e)}),[]),Object(c.useEffect)((function(){localStorage.setItem("comment",r)}),[r]),Object(U.jsxs)("form",{className:"text-area",onSubmit:function(e){return l(e)},children:[Object(U.jsx)(R.a,{required:!0,error:!m&&s,id:"outlined-error-helper-text",placeholder:"Write your comment",multiline:!0,rows:5,helperText:s?d():" ",value:r,onChange:function(e){a(e.target.value)},onFocus:function(){return u(!0)}}),Object(U.jsx)(W.a,{type:"submit",disabled:!m,variant:"contained",children:"Add comment"})]})}),V=function(){var e=I((function(e){return e.comments})),t=e.loading,n=e.error,a=e.comments,o=F();return Object(c.useEffect)((function(){o(E())}),[]),Object(U.jsxs)(U.Fragment,{children:[t&&Object(U.jsx)(q,{}),Object(U.jsxs)("div",{className:"app",children:[Object(U.jsx)(A.a,{variant:"h2",align:"center",color:"primary",children:0===a.length?"No comments yet":"All comments"}),Object(U.jsx)(H,{}),Object(U.jsx)(Q,{})]}),Object(U.jsx)(S.a,{open:n!==r.NONE,autoHideDuration:5e3,onClose:function(){return o(T.setError(r.NONE))},anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(U.jsx)(k.a,{severity:"error",children:n})})]})},X=Object(s.a)({palette:{primary:{main:"#FCDCE2"},secondary:{main:"#FFFCFD"}}});i.a.render(Object(U.jsx)(d.a,{store:_,children:Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(u.a,{theme:X,children:Object(U.jsx)(V,{})})})}),document.getElementById("root"))}},[[236,1,2]]]);
//# sourceMappingURL=main.9f06ed8b.chunk.js.map